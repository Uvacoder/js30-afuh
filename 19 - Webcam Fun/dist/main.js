"use strict";function getVideo(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){video.src=window.URL.createObjectURL(t),video.play()}).catch(function(t){console.error("T_T",t.name)})}function paintToCanvas(){click.style="opacity: 1";var t=video.videoWidth,e=video.videoHeight;return canvas.width=t,canvas.height=e,setInterval(function(){ctx.drawImage(video,0,0,t,e);var a=ctx.getImageData(0,0,t,e);a=rgbSplit(a),ctx.putImageData(a,0,0)},60)}function takePhoto(){snap.currentTime=0,snap.play();var t=canvas.toDataURL("image/jpeg"),e=document.createElement("a");e.href=t,e.setAttribute("download","handsome"),e.innerHTML='<img src="'+t+'" alt="Handsome" />',strip.insertBefore(e,strip.firstChild)}function redEffect(t){for(var e=0;e<t.data.length;e+=4)t.data[e+0]=t.data[e+0]+100,t.data[e+1]=t.data[e+1]-50,t.data[e+2]=.5*t.data[e+2];return t}function rgbSplit(t){for(var e=0;e<t.data.length;e+=4)t.data[e-150]=t.data[e+0],t.data[e+500]=t.data[e+1],t.data[e-500]=t.data[e+2];return t}var video=document.querySelector(".player"),canvas=document.querySelector(".photo"),ctx=canvas.getContext("2d"),strip=document.querySelector(".strip"),snap=document.querySelector(".snap"),click=document.querySelector(".take-photo");getVideo(),video.addEventListener("canplay",paintToCanvas),click.addEventListener("click",takePhoto);